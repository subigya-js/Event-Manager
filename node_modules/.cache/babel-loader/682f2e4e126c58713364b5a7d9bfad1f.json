{"ast":null,"code":"/*!\r\n * express\r\n * Copyright(c) 2009-2013 TJ Holowaychuk\r\n * Copyright(c) 2013 Roman Shtylman\r\n * Copyright(c) 2014-2015 Douglas Christopher Wilson\r\n * MIT Licensed\r\n */\n\n'use strict';\n\n/**\r\n * Module dependencies.\r\n */\nvar bodyParser = require('body-parser');\nvar EventEmitter = require('events').EventEmitter;\nvar mixin = require('merge-descriptors');\nvar proto = require('./application');\nvar Route = require('./router/route');\nvar Router = require('./router');\nvar req = require('./request');\nvar res = require('./response');\n\n/**\r\n * Expose `createApplication()`.\r\n */\n\nexports = module.exports = createApplication;\n\n/**\r\n * Create an express application.\r\n *\r\n * @return {Function}\r\n * @api public\r\n */\n\nfunction createApplication() {\n  var app = function app(req, res, next) {\n    app.handle(req, res, next);\n  };\n  mixin(app, EventEmitter.prototype, false);\n  mixin(app, proto, false);\n\n  // expose the prototype that will get set on requests\n  app.request = Object.create(req, {\n    app: {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: app\n    }\n  });\n\n  // expose the prototype that will get set on responses\n  app.response = Object.create(res, {\n    app: {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: app\n    }\n  });\n  app.init();\n  return app;\n}\n\n/**\r\n * Expose the prototypes.\r\n */\n\nexports.application = proto;\nexports.request = req;\nexports.response = res;\n\n/**\r\n * Expose constructors.\r\n */\n\nexports.Route = Route;\nexports.Router = Router;\n\n/**\r\n * Expose middleware\r\n */\n\nexports.json = bodyParser.json;\nexports.query = require('./middleware/query');\nexports.raw = bodyParser.raw;\nexports.static = require('serve-static');\nexports.text = bodyParser.text;\nexports.urlencoded = bodyParser.urlencoded;\n\n/**\r\n * Replace removed middleware with an appropriate error message.\r\n */\n\nvar removedMiddlewares = ['bodyParser', 'compress', 'cookieSession', 'session', 'logger', 'cookieParser', 'favicon', 'responseTime', 'errorHandler', 'timeout', 'methodOverride', 'vhost', 'csrf', 'directory', 'limit', 'multipart', 'staticCache'];\nremovedMiddlewares.forEach(function (name) {\n  Object.defineProperty(exports, name, {\n    get: function get() {\n      throw new Error('Most middleware (like ' + name + ') is no longer bundled with Express and must be installed separately. Please see https://github.com/senchalabs/connect#middleware.');\n    },\n    configurable: true\n  });\n});","map":null,"metadata":{},"sourceType":"script"}